using Gmou.DomainModelEntities;
using Gmou.Web.Models;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Gmou.Web.Controllers
{
    public class FuelController : Controller
    {
        //
        // GET: /Fuel/

        public ActionResult Index()
        {
            return PartialView(@"~/Views\Fuel\_FuelDetail.cshtml");
        }
        public ActionResult Chart()
        {
            return PartialView(@"~/Views\Fuel\_sampleChart.cshtml");
        }

        
        
        [HttpGet]
            public ActionResult ShowChart()
            {
                var data = BusinessAccessLayer.BALSupport.GetCashSheetChart();
                var chartData = data
    
    .Select(a => new
    {
      Dates = a.Dates.ToShortDateString(),
      Amount = a.Amount
    });
                return Json(chartData,JsonRequestBehavior.AllowGet);
                }

        public ActionResult FuelCashMemoEntry()
        {
            var data = BusinessAccessLayer.BALFuel.BALGetAllFuel();
            var pumpfule = BusinessAccessLayer.BALFuel.BALGetAllStation();
            FuelViewModel vivraniviewmodel = new FuelViewModel
            {
                fueltype = new SelectList(data, "FuelType", "FuelName"),
                fuelpump = new SelectList(pumpfule, "StationID", "StationName")
            };

            return PartialView(@"~/Views\Fuel\_fuelentry.cshtml",vivraniviewmodel);
        }

        [HttpPost]
        public ActionResult SaveCashMemoDetails(FuelCashMemo model)
        {
            var data = BusinessAccessLayer.BALFuel.BALSaveCashMemoDetails(model);
            return Json(data, JsonRequestBehavior.AllowGet);
           
        }

        [HttpPost]
        public ActionResult GetFuelPrice(FuelPriceModel model)
        {

            var data = BusinessAccessLayer.BALFuel.BALGetFuelPrice(model.pumpid, model.fuelid);
          
            return Json(data, JsonRequestBehavior.AllowGet);
        }

        public ActionResult FuelPriceEntry()
        {
            var data = BusinessAccessLayer.BALFuel.BALGetAllFuel();
            var pumpfule = BusinessAccessLayer.BALFuel.BALGetAllStation();
            FuelViewModel vivraniviewmodel = new FuelViewModel
            {
                fueltype = new SelectList(data, "FuelType", "FuelName"),
                fuelpump = new SelectList(pumpfule, "StationID", "StationName")
            };

            return PartialView(@"~/Views\Fuel\_fuelPrice.cshtml", vivraniviewmodel);
        }
        public ActionResult GetAllFuelRateList()
        {

            var data = BusinessAccessLayer.BALFuel.BALGetAllFuelRate();

            return Json(data, JsonRequestBehavior.AllowGet);
        }

        public ActionResult SaveFuelDetails(FuelPriceListModel model)
        {

            var data = BusinessAccessLayer.BALFuel.BALSaveFuelDetails(model);

            return Json(data, JsonRequestBehavior.AllowGet);
        }

        public ActionResult UpdateFuelDetails(UpdateFuelModel model)
        {
             
            var data = BusinessAccessLayer.BALFuel.BALUpdatefuelDetail(model);

            return Json(data, JsonRequestBehavior.AllowGet);

        }
    }
}
