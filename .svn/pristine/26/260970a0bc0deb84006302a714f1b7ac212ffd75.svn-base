@model IEnumerable<Gmou.DomainModelEntities.BusInsuranceNotification>
@{
    ViewBag.Title = "Buses";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/Scripts/LTE/ui/date.format.js"></script>
<style>
    .fragment {
    font-size: 12px;
    font-family: tahoma;
    height: 140px;
    border: 1px solid #ccc;
    color: #555;
    display: block;
    padding: 10px;
    box-sizing: border-box;
    text-decoration: none;
    background-color:khaki;
    width:25%;
}

.fragment:hover {
    box-shadow: 2px 2px 5px rgba(0,0,0,.2);

}

.fragment img { 
    float: left;
    margin-right: 10px;
}


.fragment h3 {
    padding: 0;
    margin: 0;
    color: #369;
}
.fragment h4 {
    padding: 0;
    margin: 0;
    color: #000;
}
.close {
    float:right;
    display:inline-block;
    padding:2px 5px;
    background:#ccc;
}

.close:hover {
        float:right;
        display:inline-block;
        padding:2px 5px;
        background:#ccc;
    color:#fff;
    }
</style>
<body>
    <div class="PageContentWindow" style="text-align: center; font-size: 12px;">
        <table id="InsuranceTable" cellpadding="3px" cellspacing="0px" width="100%" class="grdTrHoverEffect">
            <thead>
                <tr>
                    <th>
                        Bus Number
                    </th>
                   
                    <th>
                        Owner Name
                    </th>
                    <th>
                        Expiry Date
                    </th><th>
    Insurance Company
</th>
                 

                    <th style="width:30px">Edit</th>

                </tr>
            </thead>
        </table>
    </div>
</body>
<script type="text/javascript">

    $(document).load(function () {

    });
    $(document).ready(function () {

        ShowInsurance();


    });

    function ShowInsurance()
    {
        $.ajax({
            type: "GET",
            url: "/Admin/GetInsuranceNearDate",
            traditional: true,
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                debugger;
                if (data) {
                    var len = data.length;
                    var txt = "";
                    if (len > 0) {
                        for (var i = 0; i < len; i++) {
                            if (data[i].bus_id) {
                                var regDate = new Date(parseInt(data[i].InsuranceValidity.substr(6))).format("dd/mm/yyyy")
                                txt += "<tr><td>" + data[i].bus_number + "</td>" + "<td>" + data[i].bus_owner_name + "</td><td>" + data[i].InsuranceValidity + "</td>"
                                    + "<td>" + data[i].InsuranceCompany + "</td>"
                                 + "<td><a href='javascript:void(0)' onclick= editBuses(" + '"' + data[i].bus_id + '"' + ")><img src='../Images/edit.png' style='height:20px' /></a></td></tr>";
                            }
                        }
                        if (txt != "") {
                            $("#InsuranceTable").html(txt);

                        }
                    }
                }
            },
            error: function (data) { alert("error" + data) }
        });
    }
</script>
<div>
    @*@{

        foreach(var item in Model)
        {
            @Gmou.Web.Helpers.HelpersMVC.Generatedivs(item);
        }
    }*@
 

</div>
