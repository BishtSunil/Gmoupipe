using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data;
using System.Data.SqlClient;
using Gmou.DomainModelEntities;

namespace Gmou.DataRepository
{
  public   class SupportingRepository
    {
      public static IEnumerable<PlacesModel> GetAllPlaces()
      {

          using (var conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
          {
              using (var cmd = new SqlCommand("sp_GetAllPlaces", conn))
              {
                  cmd.CommandType = CommandType.StoredProcedure;

                  conn.Open();
                  SqlDataReader rd = cmd.ExecuteReader();
                  List<FuelType> lstfueltype = new List<FuelType>();
                  while (rd.Read())
                  {
                      yield return new PlacesModel(
                           (Convert.ToInt32(rd["serviceid"])),
                           ((rd["service_place"]).ToString()));
                            
                  }
                 
                  conn.Close();
              }
          }
      }
    }
}
