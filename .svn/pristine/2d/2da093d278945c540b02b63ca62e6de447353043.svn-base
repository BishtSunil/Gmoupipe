
using Gmou.BusinessAccessLayer;
using Gmou.DomainModelEntities;
using Gmou.Web.Models;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Gmou.Web.Controllers
{
    public class AdminController : Controller
    {
        //
        // GET: /Admin/

        public ActionResult Index()
        {
            return View();
        }

        //public ActionResult EditEmployee(string empId)
        
        //{
            
        //    int id = Convert.ToInt32(Encrypt.decryptMethod(empId));
        //      var getEmployee = Gmou.BusinessAccessLayer.EmployeeBAL.GetEmployeeDetail(id);
              
        //    EmployeeModel model = new EmployeeModel();
        //    model.ID = getEmployee[0].ID;
        //    model.EmployeeId = getEmployee[0].EmployeeId;
        //    model.FirstName = getEmployee[0].FirstName;
        //    model.MiddleName = getEmployee[0].MiddleName;
        //    model.LastName = getEmployee[0].LastName;
        //    model.BirthDate = getEmployee[0].BirthDate;
        //    model.Address = getEmployee[0].Address;
        //    model.City = getEmployee[0].City;
        //    model.Contact = getEmployee[0].Contact;
        //    model.EmergencyContact = getEmployee[0].EmergencyContact;
        //    model.Qaulifiaction = getEmployee[0].Qaulifiaction;
        //    model.joiningDate = getEmployee[0].joiningDate;
        //    model.Office = getEmployee[0].Office; 
        //    model.MartailStatus = getEmployee[0].MartailStatus;
        //    model.Department = getEmployee[0].Department;
        //    return View(model);
        //}

        public ActionResult Employee1()
        {
            var lstEmployee = Gmou.BusinessAccessLayer.EmployeeBAL.GetAllEmployeelist();
            ViewBag.empList = lstEmployee;
            return View();
        }
      
       


        public ActionResult CreateEmployee()
        {
            Gmou.Web.Models.EmployeeViewModel employeemodel = new Models.EmployeeViewModel{
            lstDepartment= new SelectList(Gmou.BusinessAccessLayer.EmployeeBAL.GetDepartmentList(),"DepartmentID","DepartmentName"),
            lstOffices = new SelectList(Gmou.BusinessAccessLayer.EmployeeBAL.GetOfficeList(), "OfficeAreaID", "OfficeAreaName")
            };
           
           
            return PartialView(@"~/Views\Admin\Partial\_createEmployee.cshtml",employeemodel);
        }

       

        public ActionResult SearchEmployee()
        {
           
            return PartialView(@"~/Views\Admin\Partial\_searchEmployee.cshtml");
        }
        [HttpGet]
        public ActionResult GetEmployeeDetails(string employeeID)
        {
             int id = Convert.ToInt32(employeeID);
            var employeeDetails = EmployeeBAL.GetEmployeeDetail(id);

          return Json(employeeDetails, JsonRequestBehavior.AllowGet);
        }
        [HttpPost]
        public ActionResult SaveEmpolyee(SaveEmployeeModel saveEmployeeModel)
        {
          var result= BusinessAccessLayer.EmployeeBAL.SaveEmployeeDetails(Helpers.Converter.ConvertToDomainModel(saveEmployeeModel));
            return Json(result,JsonRequestBehavior.AllowGet);
        } 
    }
}
